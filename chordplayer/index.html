<!DOCTYPE html>
<html>
<head>
    <title>Chord Player</title>
    <style>
        .grid-container {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 5px;
            padding: 5px;
        }
        .grid-item {
            border: 1px solid black;
            padding: 5px;
            text-align: center;
            cursor: pointer;
            color: black;
            font-size: 0.8em;
        }
    </style>
    <script src="https://unpkg.com/tone@14"></script>
</head>
<body>
    <div class="grid-container">
        <!-- コードボタンを配置 -->
    </div>

    <script>
        // コードのテーブルと取得処理を担当するクラス
        class ChordDictionary {
            constructor() {
                // コードのテーブルを定義
                this.chords = {
                    Major: {
                        'C': ['C4', 'E4', 'G4'],
                        'C#': ['C#4', 'F4', 'G#4'],
                        'D': ['D4', 'F#4', 'A4'],
                        'D#': ['D#4', 'G4', 'A#4'],
                        'E': ['E4', 'G#4', 'B4'],
                        'F': ['F4', 'A4', 'C5'],
                        'F#': ['F#4', 'A#4', 'C#5'],
                        'G': ['G4', 'B4', 'D5'],
                        'G#': ['G#4', 'C5', 'D#5'],
                        'A': ['A4', 'C#5', 'E5'],
                        'A#': ['A#4', 'D5', 'F5'],
                        'B': ['B4', 'D#5', 'F#5']
                    },
                    Minor: {
                        'C': ['C4', 'D#4', 'G4'],
                        'C#': ['C#4', 'E4', 'G#4'],
                        'D': ['D4', 'F4', 'A4'],
                        'D#': ['D#4', 'F#4', 'A#4'],
                        'E': ['E4', 'G4', 'B4'],
                        'F': ['F4', 'G#4', 'C5'],
                        'F#': ['F#4', 'A4', 'C#5'],
                        'G': ['G4', 'A#4', 'D5'],
                        'G#': ['G#4', 'B4', 'D#5'],
                        'A': ['A4', 'C5', 'E5'],
                        'A#': ['A#4', 'C#5', 'F5'],
                        'B': ['B4', 'D5', 'F#5']
                    }
                };
            }

            // バリエーションとキーに対応するコードの構成音リストを返すメソッド
            getChord(variation, key) {
                return this.chords[variation][key];
            }
        }

        // コードボタンを作成し、音を再生するプレイヤークラス
        class ChordPlayer {
            constructor() {
                // 使用するキー、バリエーション、ボタンの背景色の配列を定義
                this.keys = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
                this.variations = ['Major', 'Minor'];
                this.colors = ['pink', 'peachpuff', 'palegoldenrod', 'palegreen', 'lightblue', 'plum', 'thistle'];

                // Tone.jsで使用する音声合成オブジェクトを作成
                this.synth = new Tone.PolySynth().toDestination();

                // コンテナ要素を取得
                this.container = document.querySelector('.grid-container');

                // ChordDictionaryクラスのインスタンスを作成
                this.chordDictionary = new ChordDictionary();
            }

            // ボタンを作成し、クリック時に対応するコードを再生するメソッド
            createButtons() {
                this.variations.forEach(variation => {
                    this.keys.forEach((key, index) => {
                        // ボタン要素を作成
                        const button = document.createElement('div');
                        button.classList.add('grid-item');
                        button.textContent = `${key} ${variation}`;
                        button.style.backgroundColor = this.colors[index % this.colors.length];

                        // ボタンがクリックされた時の処理を追加
                        button.addEventListener('click', () => {
                            // ChordDictionaryからコードを取得
                            const chord = this.chordDictionary.getChord(variation, key);
                            // 音を再生
                            this.synth.triggerAttackRelease(chord, '0.5s');
                        });

                        // コンテナにボタンを追加
                        this.container.appendChild(button);
                    });
                });
            }
        }

        // ChordPlayerクラスのインスタンスを作成し、ボタンを作成
        const chordPlayer = new ChordPlayer();
        chordPlayer.createButtons();
    </script>
</body>
</html>
